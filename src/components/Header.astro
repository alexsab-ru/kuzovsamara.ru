---
import { SITE_NAME } from '@/const.js';
import { Icon } from 'astro-icon'
---

<header 
	class="sticky md:fixed w-full top-0 left-0 bg-white z-30 transition-colors duration-300" 
	x-data="header"
	:class="{'!bg-white': open}"
>
	<div class="container">
		<div class="flex flex-col md:flex-row items-center justify-center sm:justify-between py-2 md:py-2.5 max-md:gap-y-4">
			<div class="flex flex-nowrap items-center gap-3 divide-x divide-black/20">
				<div class="max-sm:flex-auto text-2xl uppercase w-min font-mono font-medium !leading-none">{ SITE_NAME }</div>
				<div class="max-sm:flex-auto px-3 flex flex-wrap sm:grid grid-cols-2 items-center gap-y-1 gap-x-2">
					<img src="./img/logos/exeed.svg" class="h-2 w-auto" title="Exeed" alt="exeed">
					<img src="./img/logos/geely.svg" class="h-4 w-auto" title="Geely" alt="geely">
					<img src="./img/logos/omoda.svg" class="h-2 w-auto" title="Omoda" alt="omoda">
					<img src="./img/logos/chery.svg" class="h-4 w-auto" title="Chery" alt="chery">
					<img src="./img/logos/jaecoo.svg" class="h-2 w-auto invert" title="Jaecoo" alt="jaecoo">
					<img src="./img/logos/gac.svg" class="h-4 w-auto" title="Gac" alt="gac">
				</div>
			</div>
			<div class="flex items-center max-sm:justify-center max-sm:flex-wrap gap-3 sm:gap-10">
				<div class="hidden lg:flex flex-col">
					<a href="tel:+78463210000" class="font-extrabold text-black/80 text-base md:text-lg flex items-center gap-1 flex-nowrap transition-colors hover:text-accent-500" title="ул. Демократическая, 55"><Icon name="ic:outline-phone-android" class="w-6" /> 8 (846) 321-00-00</a>
					<a href="tel:+78463210909" class="font-extrabold text-black/80 text-base md:text-lg flex items-center gap-1 flex-nowrap transition-colors hover:text-accent-500" title="Южное шоссе, 12, стр. 3"><Icon name="ic:outline-phone-android" class="w-6" /> 8 (846) 321-09-09</a>
				</div>
				<div>
					<a 
						href="#" 
						class="underline" 
						@click.prevent="open = !open"
						@keydown.escape="open = false"
					>Адреса салонов</a>
					<small class="block text-xs">2 салона</small>
				</div>
				<a 
					class="popup-link btn"
					href="#common-modal"
					data-title="Заказать звонок"
					data-form_name="Заказ звонка. Шапка"
				>
					Заказать звонок
				</a>
			</div>
		</div>
	</div>
	<div 
		x-show="open"
		x-cloak 
		@click.outside="open = false"
		class="relative border-t border-t-black/10 py-6 shadow-2xl"
	>
		<button class="w-10 h-10 absolute right-0 top-0 text-2xl font-mono transition-opacity opacity-60 hover:opacity-100" @click.prevent="open = false">&times;</button>
		<div class="container">
			<div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 max-md:divide-y max-md:gap-4">
				<div class="flex flex-col gap-3 md:pl-8 md:border-l border-l-black/10 max-md:last:pt-4">
					<a href="#" class="text-xl flex items-center gap-1 flex-nowrap"><Icon name="clarity:map-marker-line" class="w-8" /> ул. Демократическая, 55</a>
					<a href="tel:+78463210000" class="text-2xl font-extrabold text-black/80 flex items-center gap-1 flex-nowrap transition-colors hover:text-accent-500"><Icon name="ic:outline-phone-android" class="w-7" /> 8 (846) 321-00-00</a>
				</div>
				<div class="flex flex-col gap-3 md:pl-8 md:border-l border-l-black/10 max-md:last:pt-4">
					<a href="#" class="text-xl flex items-center gap-1 flex-nowrap"><Icon name="clarity:map-marker-line" class="w-8" /> Южное шоссе, 12, стр. 3</a>
					<a href="tel:+78463210909" class="text-2xl font-extrabold text-black/80 flex items-center gap-1 flex-nowrap transition-colors hover:text-accent-500"><Icon name="ic:outline-phone-android" class="w-7" /> 8 (846) 321-09-09</a>
				</div>
			</div>
		</div>
	</div>
</header>